<!doctype html>
<html class="no-js" lang="en" xmlns:th="https://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="layout/layout(title='adopt')">


<head>
<title>Safira - contact page</title>

<style type="text/css">
#adoptDate,#adoptTime {
	border: 1px solid black;
	position: relative;
	width: 200px;
	padding: 10px;
	background-color: transparent;
	text-align: center;
	font-size: 100%;
	margin-bottom: 20px;
	
}

#adoptDate::-webkit-calendar-picker-indicator,
#adoptTime::-webkit-calendar-picker-indicator {
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	background: transparent;
	color: transparent;
	cursor: pointer;
}

#adoptDate::before {
	content: attr(placeholder);
	width: 100%;
	height: 100%;
}

#adoptDate:valid::before {
	display: none;
}
</style>

</head>

<body>



	<!--header area start-->

	<!--offcanvas menu area start-->


	<!--offcanvas menu area end-->


	<!--header area end-->

	<!--breadcrumbs area start-->

	<!--breadcrumbs area end-->
	<th:block layout:fragment="content">
		<!--contact map start-->
		<!-- <div class="contact_map mt-70">
       <div class="map-area">
          <div id="googleMap"></div>
       </div>
    </div>-->
		<!--contact map end-->

		<!--contact area start-->
		<div class="contact_area" style="margin-top: 100px;">
			<div class="container">
				<div class="row">
					<div class="col-lg-6 col-md-6">
						<div class="contact_message content">
							<h3 style="font-weight: bold">펫 정보</h3>
							<p>
								펫 종류: <span th:text="${pet.petType}"></span>
							</p>
							<p>
								펫 성별: <span th:text="${pet.petGender}"></span>
							</p>
							<p>
								펫 특징: <span th:text="${pet.petCharacter}"></span>
							</p>
							<img src="#" th:src="@{/image/pet/}+${pet.getPetImage}"
								style="width: 400px">

							<!--	<ul>
								<li><i class="fa fa-fax"></i> 주소 : 서울시 강남구</li>
								<li><i class="fa fa-phone"></i> <a href="#">Infor@roadthemes.com</a></li>
								<li><i class="fa fa-envelope-o"></i><a href="tel:0(1234)567890">0(1234) 567 890</a>
								</li>
							</ul>-->
						</div>
					</div>
					<div class="col-lg-6 col-md-6">
						<div class="contact_message form">
							<h3 style="font-weight: bold">신청 양식</h3>
							<form id="contact-form" method="POST"
								th:action="@{/create-adopt}" th:object="${adopt}">

								<input type="hidden" name="petNo" th:value="${pet.petNo}" />

								<!-- <p>
									<label> 이름 </label> <input name="name" placeholder="Name *"
										type="text">
								</p>
								<p>
									<label> 연락처 </label> <input name="email" placeholder="Email *"
										type="email">
								</p>
								<p>
									<label> 주소 </label> <input name="subject"
										placeholder="Subject *" type="text">
								</p> -->
								<!-- <div class="contact_textarea">
									<label> 하고싶은 말</label>
									<textarea placeholder="Message *" name="message" class="form-control2"></textarea>
								</div> -->
								<div>
									<span>방문 날짜</span> <input type="date" name="adoptDate"
										id="adoptDate" placeholder="날짜를 선택해주세요" required="required" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}">
								</div>
								<div>
									<span>방문 시간</span> 
									 <select name="adoptTime" id="adoptTimeSelect" style="width: 200px; padding: 10px;">
										<option value="09">09 AM</option>

										<option value="10">10 AM</option>

										<option value="11">11 AM</option>

										<option value="12">12 PM</option>

										<option value="13">13 PM</option>

										<option value="14">14 PM</option>

										<option value="15">15 PM</option>

										<option value="16">16 PM</option>

										<option value="17">17 PM</option>

										<option value="18">18 PM</option>

										<option value="19">19 PM</option>
									</select> 
									<!-- <input type="time" name="adoptTime" id="adoptTime" required="required"> -->
									
								</p>

								<button type="submit" class="submit">submit</button>
								<!-- <p class="form-messege"></p> -->
								<!-- <div th:if="${msg!=null}">
									<p th:text="${msg}" class="success-message"></p>
								</div> -->
							</form>

						</div>
					</div>
				</div>
			</div>
		</div>
		
		
 	<script>
		 
	 	function ajaxRequest(method, url, sendJsonObject) {
	 		let returnResultJsonObject={};
	 		$.ajax({
	 			async:false,
	 			method: method,
	 			url: url,
	 			contentType: 'application/json;UTF-8',
	 			data: JSON.stringify(sendJsonObject),
	 			type: 'json',
	 			success: function(resultJsonObject) {
	 				returnResultJsonObject = resultJsonObject;
	 			}
	 		});
	 		return returnResultJsonObject;
	 	}
		
	
		$('.submit').on('click', function(event) {
	        event.preventDefault();
	        let petNo = $(this).data('petNo');
	        let adoptDate = $('#adoptDate').val(); // 선택한 날짜 가져오기
	        let adoptTime = $('#adoptTimeSelect').val(); // 선택한 시간 가져오기
			
	        let sendJsonObject = {
	            petNo: petNo,
	            adoptDate: adoptDate,
	            adoptTime: adoptTime
	        };
			
	       let responseObject=ajaxRequest('POST','adopt/create-adopt',sendJsonObject);
	  		if(responseObject.status ==1){
				alert('로그인이 필요합니다.');
				window.location.href = 'index';	// 로그인 창으로 이동
			}else{
				alert("입양신청이 완료되었습니다.");
			}
	  		
	    });
		
		/*
		$('.submit').on('click', function(event) {
    event.preventDefault();
    let petNo = $(this).data('petNo');
    let adoptDate = $('#adoptDate').val();
    let adoptTime = $('#adoptTimeSelect').val();

    let sendJsonObject = {
        petNo: petNo,
        adoptDate: adoptDate,
        adoptTime: adoptTime
    };

    $.ajax({
        type: 'POST',
        url: 'adopt/create-adopt', // 요청 URL을 상대 경로로 수정
        contentType: 'application/json;UTF-8',
        data: JSON.stringify(sendJsonObject),
        dataType: 'json', // 서버에서 반환하는 데이터 형식을 JSON으로 설정
        success: function(responseObject) {
            if (responseObject.status === 1) {
                alert('로그인이 필요합니다.'); // 로그인이 필요한 경우 알림
            } else {
                alert('입양신청이 완료되었습니다.');
                window.location.href = 'index'; // 성공적인 신청 후 이동할 페이지 설정
            }
        },
        error: function(xhr, status, error) {
            alert('오류가 발생했습니다');
        }
    });
});
		*/
		
		

			// 현재 날짜를 가져오는 함수
			function getCurrentDate() {
				var currentDate = new Date();
				var year = currentDate.getFullYear();
				var month = (currentDate.getMonth() + 1).toString().padStart(2, '0');
				var day = currentDate.getDate().toString().padStart(2, '0');
				return year + '-' + month + '-' + day;
			}

			// 페이지 로드 시 실행
			window.onload = function () {
				var adoptDate = document.getElementById('adoptDate');
				// 현재 날짜로 설정
				adoptDate.setAttribute('min', getCurrentDate());
			};
		

			// 현재 시간을 가져오는 함수
			function getCurrentTime() {
				const now = new Date();
				const hours = now.getHours();
				return hours < 10 ? '0' + hours : hours;
			}

			// 현재 시간을 가져옵니다.
			const currentTime = getCurrentTime();

			// select 요소 가져오기
			const select = document.getElementById('adoptTimeSelect');

			// 각 option 요소를 반복하면서 현재 시간보다 작은 시간을 비활성화합니다.
			for (let i = 0; i < select.options.length; i++) {
				const option = select.options[i];
				const optionValue = parseInt(option.value);

				if (optionValue < currentTime) {
					option.disabled = true;
				}
			}
</script>
		
		
		
		
		
		
	</script>
		
	</th:block>
		<!--map js code here-->
	<script
		src="https://maps.google.com/maps/api/js?sensor=false&amp;libraries=geometry&amp;v=3.22&amp;key=AIzaSyChs2QWiAhnzz0a4OEhzqCXwx_qA9ST_lE"></script>
	<script src="https://www.google.com/jsapi"></script>
	<script src="assets/js/map.js"></script>
	<!--contact area end-->

	<!--footer area start-->

	<!--footer area end-->


</body>

</html>